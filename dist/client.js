(()=>{"use strict";var e={468:(e,t)=>{function o(e,t){console.log("getting distance");const o=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(o*o+n*n+r*r)}function n(e,t){console.log("getting closest player");const n=GetActivePlayers();let r=-1,l=null,s=null;t=t||2;const c=PlayerId();for(let a=0;a<n.length;a++){const i=n[a];if(i!==c){const n=GetPlayerPed(i),c=GetEntityCoords(n,!0),a=o(e,c);a<t&&(t=a,r=i,l=n,s=c)}}return{closestId:r,closestPed:l,closestCoords:s}}async function r(e){for(console.log("loading dictionary"),RequestAnimDict(e);!HasAnimDictLoaded(e);)Wait(100)}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateNuiCB=function(e,t){RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,(e,o)=>{t(e,o)})},t.getDistance=o,t.getClosestPlayer=n,t.loadAnimDict=r,t.Handcuff=async function(){console.log("attempting to handcuff");const e=GetEntityCoords(PlayerPedId(),!0),{closestId:t}=n(e,2);if(-1!==t){const e=GetPlayerServerId(t);console.log(e),emitNet("Handcuff",e),console.log(`Should have triggered the Handcuff server event with id ${e}`)}else console.error("No player found within the specified distance")},t.removeHandcuffs=async function(){console.log("attempting to remove handcuff");const e=GetEntityCoords(PlayerPedId(),!0),{closestId:t}=n(e,2);if(-1!==t){const e=GetPlayerServerId(t);emitNet("RemoveHandcuff",e)}else console.error("No Player found within the specified distance")},t.dragPlayer=function(){console.log("dragging player");const e=n(GetEntityCoords(PlayerPedId(),!0),2).closestId;if(-1!==e){const t=GetPlayerServerId(e);s=t,emitNet("Drag",t,GetPlayerServerId(PlayerId()))}else console.log("There is no player nearby!")},t.forceIntoVehicle=function(){console.log("attempting to force into vehicle");const e=PlayerPedId(),o=GetEntityCoords(e,!0),n=t.TSLib.getClosestPlayer(o,2).closestId;if(console.log(n,GetPlayerServerId(n)),n<=0)return console.log("No player found");emitNet("ForceIntoVehicle",GetPlayerServerId(n),n)},t.ForceOutOfVehicle=function(){console.log("attempting to force out of vehicle");const e=PlayerPedId(),o=GetEntityCoords(e,!0),n=t.TSLib.getClosestPlayer(o,2).closestId;if(console.log(n,GetPlayerServerId(n)),n<=0)return console.log("No player found");emitNet("ForceOutOfVehicle",GetPlayerServerId(n),n)};let l=!1;onNet("Handcuff",async()=>{console.log("Received Handcuff event from server.");const e=GetPlayerPed(-1);l||(await r("mp_arresting"),TaskPlayAnim(e,"mp_arresting","idle",8,-8,-1,49,0,!1,!1,!1),SetEnableHandcuffs(e,!0),SetCurrentPedWeapon(e,GetHashKey("WEAPON_UNARMED"),!0),l=!0)}),onNet("RemoveHandcuffs",async()=>{const e=GetPlayerPed(-1);l&&(ClearPedSecondaryTask(e),SetEnableHandcuffs(e,!1),SetCurrentPedWeapon(e,GetHashKey("WEAPON_UNARMED"),!0),l=!1)});let s=null,c=null,a=!1;onNet("Drag",(e,t)=>{const o=GetPlayerServerId(PlayerId()),n=GetPlayerPed(-1);e===o&&(c=t,a=!a,a?SetEnableHandcuffs(n,!0):SetEnableHandcuffs(n,!1))}),onNet("ForceIntoVehicle",(e,t)=>{console.log(1);const o=GetPlayerPed(t),n=PlayerPedId(),r=GetEntityCoords(n,!0),[l,s,c]=[r[0],r[1],r[2]],a=GetClosestVehicle(l,s,c,5,0,127);if(console.log(a),a){console.log(2);const t=GetEntityCoords(a,!0);GetDistanceBetweenCoords(r[0],r[1],r[2],t[0],t[1],t[2],!0)<5&&(console.log(o),console.log(`Warping player ${e} into seat: 2`),TaskWarpPedIntoVehicle(o,a,2))}else console.log("No vehicle available or no nearest player found.")}),onNet("ForceOutOfVehicle",e=>{const t=GetPlayerPed(e),o=GetVehiclePedIsIn(t,!0);0!==o?TaskLeaveAnyVehicle(t,o,16):console.error("Player is not in a vehcle")})},994:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(o(468),t),AddEventHandler("playerSpawned",()=>{emitNet("server:playerSpawned")})}},t={};!function o(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,o),l.exports}(994)})();